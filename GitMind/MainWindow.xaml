<Window 
	x:Class="GitMind.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:virtualCanvas="clr-namespace:GitMind.VirtualCanvas"
	xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Aero"
	xmlns:gitMind="clr-namespace:GitMind"
	xmlns:commitsHistory="clr-namespace:GitMind.CommitsHistory"
	xmlns:gitModel="clr-namespace:GitMind.GitModel"
	Title="GitMind"
	Height="800"
	Width="1050" 
	AllowsTransparency="True"
	WindowStyle="None"
	BorderBrush="DarkSlateBlue"
	BorderThickness="3"
	ResizeMode="CanResizeWithGrip"
	Icon="Application.ico">

	<Window.InputBindings>
		<KeyBinding Key="Escape" Command="{Binding EscapeCommand}" />
		<KeyBinding Key="F5" Command="{Binding RefreshCommand}" />
	</Window.InputBindings>

	<Window.Resources>

	</Window.Resources>


	<!--  -->
	<Grid Background="Black">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="{Binding RepositoryViewModel.DetailsSize}"/>
		</Grid.RowDefinitions>

		<!--First row (title bar) -->
		<Border 
			BorderThickness="1" 
			BorderBrush="DarkSlateBlue" 
			Grid.Row="0">

			<!-- Background="Black" -->
			<Grid >
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="*"/>
					<ColumnDefinition Width="Auto"/>
					<ColumnDefinition Width="258"/>
				</Grid.ColumnDefinitions>

				<StackPanel 
					Grid.Column="0" 
					Orientation="Horizontal">
					
					<!-- Application icon -->
					<Image 
						Source="Application.ico" 
						Width="15"
						Height="15"
						Margin="5,0">

						<!-- Version tool tip on application icon -->
						<Image.ToolTip>
							<ToolTip
							Placement="Bottom"
							HorizontalOffset="-15" 
							VerticalOffset="5"
							Background="Black"
							BorderThickness="2"
							BorderBrush="DarkOrchid">
								<StackPanel>
									<TextBlock Text="{Binding VersionText}" Foreground="LightSteelBlue"/>
								</StackPanel>
							</ToolTip>
						</Image.ToolTip>
					</Image>

					<!-- Working folder (need hyperlink to get "hand" mouse over, but hyperlink command does not work -->
					<TextBlock>
						 <Hyperlink TextDecorations="None">
							<TextBlock 	
								Margin="3,5"
								HorizontalAlignment="Left"
								VerticalAlignment="Center"
								Foreground="LightSteelBlue"
								Text="{Binding WorkingFolder}">
								<TextBlock.InputBindings>
									<MouseBinding 
										Command="{Binding SelectWorkingFolderCommand}" 
										MouseAction="LeftClick" />
								</TextBlock.InputBindings>
								<TextBlock.ToolTip>
									<ToolTip
										Placement="Bottom"					
										VerticalOffset="5"
										Background="Black"
										BorderThickness="2"
										BorderBrush="DarkOrchid">
										<StackPanel Orientation="Horizontal">
											<TextBlock Text="Current branch: " Foreground="LightSteelBlue"/>
											<TextBlock Text="{Binding BranchName}" Foreground="Lavender"/>
										</StackPanel>
									</ToolTip>
								</TextBlock.ToolTip>
							</TextBlock>
						</Hyperlink>
					</TextBlock>
				

					<!-- Commit status  -->
					<TextBlock>
						 <Hyperlink TextDecorations="None">
							<TextBlock 
								Visibility="{Binding Path=IsStatusVisible, Converter={StaticResource PropertyToVisibilityConverter}}"
								Margin="3, 5"
								Text="{Binding StatusText}"
								Foreground="BurlyWood"
								HorizontalAlignment="Left"
								VerticalAlignment="Center">

								<TextBlock.InputBindings>
									<MouseBinding 
										Command="{Binding ShowDiffCommand}" 
										MouseAction="LeftClick" />
								</TextBlock.InputBindings>
								<TextBlock.ToolTip>
									<ToolTip
										Placement="Bottom"					
										VerticalOffset="5"
										Background="Black"
										BorderThickness="2"
										BorderBrush="DarkOrchid">
										<StackPanel Orientation="Horizontal">
											<TextBlock Text="Current branch: " Foreground="LightSteelBlue"/>
											<TextBlock Text="{Binding BranchName}" Foreground="Lavender"/>
										</StackPanel>
									</ToolTip>
								</TextBlock.ToolTip>

								<TextBlock.ContextMenu>
									<ContextMenu 
										Background="Transparent" 
										Foreground="LightSteelBlue"
										BorderBrush="DarkSlateBlue"
										BorderThickness="0">

										<MenuItem 
											Header="Show Diff ..."
											Command="{Binding ShowDiffCommand}"/>
									</ContextMenu>
								</TextBlock.ContextMenu>
							</TextBlock>	
						</Hyperlink>
					</TextBlock>
					
					<Label 
						Margin="10,0"
						Foreground="DarkOrchid"
						FontSize="10"
						Content="{Binding Busy.Text}" />
				</StackPanel>


				<StackPanel Grid.Column="1" Orientation="Horizontal">

				<!-- Latest version button -->
				<!--<Button 
						Name="GetLatestVersionButton"
						Visibility="{Binding Path=IsNewVersionVisible, Converter={StaticResource PropertyToVisibilityConverter}}"
						Background="Black"  
						BorderBrush="Black"
						Foreground="Green"
						Margin="10,0,0,0"
						
						Content="New Version"
						Command="{Binding InstallLatestVersionCommand}">

						<Button.ToolTip>
							<ToolTip
								Placement="Bottom"
								HorizontalOffset="-15" 
								VerticalOffset="5"
								Background="Black"
								BorderBrush="Green">
								<StackPanel>
									<TextBlock 
										Text="New version is available, click to download and start installer ..." 
										Foreground="LightSteelBlue"/>
								</StackPanel>
							</ToolTip>
						</Button.ToolTip>
					</Button>-->

			
					
		
					<!-- Hamburger button -->

					<Button
						Style="{StaticResource BaseButtonStyle}"
						FontFamily="Segoe MDL2 Assets"
						Content="&#xE700;"
						Click="HamburgerButton_OnClick">
						
						<Button.ContextMenu>		
							<ContextMenu 
								Name="HamburgerContextMenu"
								Foreground="LightSteelBlue"
								BorderBrush="DarkSlateBlue"
								BorderThickness="0">

								<!--Show Branch menu item -->
								<MenuItem 
									Header="Show Branch" 
									ItemsSource="{Binding RepositoryViewModel.AllBranches}" 								
									Padding="0" 
									Margin="0" 
									BorderBrush="DarkSlateBlue" 
									BorderThickness="0">

									<MenuItem.ItemContainerStyle>
										<!--<Setter Property="Background" Value="Black"/>-->
										<Style TargetType="MenuItem">
											<Setter Property="Header" Value="{Binding Text}"/>
											<Setter Property="Background" Value="Black"/>
											<Setter Property="Foreground" Value="LightSteelBlue"/>
											<Setter Property="Margin" Value="0"/>
											<Setter Property="Padding" Value="0"/>
											<Setter Property="BorderBrush" Value="DarkSlateBlue"/>
											<Setter Property="BorderThickness" Value="0"/>
											<Setter Property="Command" Value="{Binding DataContext.RepositoryViewModel.ShowBranchCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type MenuItem}, AncestorLevel=1}}"/>
											<Setter Property="CommandParameter" Value="{Binding Branch}"/>
										</Style>
									</MenuItem.ItemContainerStyle>
								</MenuItem>
						
								
							</ContextMenu>
						</Button.ContextMenu>
					</Button>
							
				</StackPanel>


				<StackPanel Grid.Column="2" Orientation="Horizontal">

					<!-- Search box  -->
					<TextBox
						IsEnabled="true"
						BorderBrush="DarkSlateBlue"
						Width="165"
						Height="20"
						Margin="3,0"
						Background="Black"
						Text="{Binding SearchBox, UpdateSourceTrigger=PropertyChanged}"
						Foreground="Lavender"
						HorizontalAlignment="Right"
						VerticalAlignment="Center"/>

					<!-- Minimize button-->			
					<Button 
						Style="{StaticResource BaseButtonStyle}"
						FontFamily="Segoe MDL2 Assets"
						Content="&#xE738;"
						Command="{Binding MinimizeCommand}"/>
					
					<!-- Maximize button-->
					<Button 
						Style="{StaticResource BaseButtonStyle}"
						FontFamily="Segoe MDL2 Assets"
						Content="&#xE15B;"
						Command="{Binding ToggleMaximizeCommand}"/>		
					
					<!-- Close Button -->
					<Button 
						Style="{StaticResource BaseButtonStyle}"
						FontFamily="Segoe MDL2 Assets"
						Content="&#xE711;"
						Command="{Binding CloseCommand}"/>
						
				</StackPanel>
			</Grid>
		</Border>


		<!--Commit log 
		Background="Black"  
		
		-->
		
		<Border 
			BorderThickness="1" 
			BorderBrush="DarkSlateBlue" 
			Grid.Row="1">
		<DockPanel>

			<ListBox 
				IsTextSearchEnabled="False"
				Padding="4"
				x:Name="ItemsListBox" 
				Style="{DynamicResource ListBoxScrollbarStyle}" 
				SelectedIndex="{Binding RepositoryViewModel.SelectedIndex, Mode=TwoWay}" 
				SelectedItem="{Binding RepositoryViewModel.SelectedItem, Mode=TwoWay}"
			>
				<ListBox.InputBindings>
					<KeyBinding Key="Space" Command="{Binding RepositoryViewModel.ToggleDetailsCommand}" />
				</ListBox.InputBindings>

				<ListBox.ContextMenu>
					<!-- Background="Black" -->
					<ContextMenu 
					
						Foreground="LightSteelBlue"
						BorderBrush="DarkSlateBlue"
						BorderThickness="0">

						<!--Show Branch menu item -->
						<MenuItem 
							Header="Show Branch" 
							ItemsSource="{Binding RepositoryViewModel.AllBranches}" 								
							Padding="0" 
							Margin="0" 
							BorderBrush="DarkSlateBlue" 
							BorderThickness="0">

							<MenuItem.ItemContainerStyle>
								<!--<Setter Property="Background" Value="Black"/>-->
								<Style TargetType="MenuItem">
									<Setter Property="Header" Value="{Binding Text}"/>
									<Setter Property="Background" Value="Black"/>
									<Setter Property="Foreground" Value="LightSteelBlue"/>
									<Setter Property="Margin" Value="0"/>
									<Setter Property="Padding" Value="0"/>
									<Setter Property="BorderBrush" Value="DarkSlateBlue"/>
									<Setter Property="BorderThickness" Value="0"/>
									<Setter Property="Command" Value="{Binding DataContext.RepositoryViewModel.ShowBranchCommand, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type MenuItem}, AncestorLevel=1}}"/>
									<Setter Property="CommandParameter" Value="{Binding Branch}"/>
								</Style>
							</MenuItem.ItemContainerStyle>
						</MenuItem>
					</ContextMenu>
				</ListBox.ContextMenu>
				

				<ListBox.ItemsPanel>
					<ItemsPanelTemplate>
						<virtualCanvas:ZoomableCanvas 
							Loaded="ZoomableCanvas_Loaded"
							RealizationLimit="1000" 
							RealizationRate="20"
							RealizationPriority="Normal"
							ApplyTransform="false"/>
					</ItemsPanelTemplate>
				</ListBox.ItemsPanel>

				<ListBox.ItemContainerStyle>
					<Style TargetType="ListBoxItem">
						
						<Setter Property="Canvas.ZIndex" Value="{Binding ZIndex}"/>
						
						<!-- Style for list items (selected/hoover) -->
						<Setter Property="Template">
							<Setter.Value>
								<ControlTemplate TargetType="ListBoxItem">
									<Border
										Name="ItemBorder"
										CornerRadius="0" 
										BorderBrush="Transparent"
										BorderThickness="1" 
										Margin="0"
										Background="Transparent">
										<ContentPresenter />
									</Border>
									<ControlTemplate.Triggers>
										<Trigger Property="IsSelected" Value="True">
											<Setter 
												TargetName="ItemBorder" 
												Property="BorderBrush" 
												Value="{StaticResource SelectedItemBorderBrush}" />
											<Setter 
												TargetName="ItemBorder" 
												Property="Background" 
												Value="{StaticResource SelectedItemBackgroundBrush}" />
										</Trigger>
										<MultiTrigger>
											<MultiTrigger.Conditions>
												<Condition Property="IsMouseOver" Value="True" />
												<Condition Property="IsSelected" Value="False" />
											</MultiTrigger.Conditions>
											<Setter 
												TargetName="ItemBorder" 
												Property="BorderBrush" 
												Value="{Binding HoverBrush}" />
										</MultiTrigger>
									</ControlTemplate.Triggers>
								</ControlTemplate>
							</Setter.Value>
						</Setter>			
						

						<Setter Property="Canvas.Top" Value="{Binding Rect.Top}"/>
						<Setter Property="Canvas.Left" Value="{Binding Rect.Left}"/>
						
						<Setter Property="ToolTipService.ShowOnDisabled" Value="True"/>
						<EventSetter Event="MouseDoubleClick" Handler="MouseDobleClick" />
						
						<Setter Property="Width">
							<Setter.Value>
								<MultiBinding 
									Converter="{x:Static virtualCanvas:ArithmeticConverter.Default}"
									ConverterParameter="*">
									<Binding Path="Width"/>
									<Binding 
										Path="Scale"
										RelativeSource="{RelativeSource	AncestorType=virtualCanvas:ZoomableCanvas}"/>
								</MultiBinding>
							</Setter.Value>
						</Setter>

						<Setter Property="Height">
							<Setter.Value>
								<MultiBinding 
									Converter="{x:Static virtualCanvas:ArithmeticConverter.Default}"
									ConverterParameter="*">
									<Binding Path="Rect.Height"/>
									<Binding 
										Path="Scale"
										RelativeSource="{RelativeSource	AncestorType=virtualCanvas:ZoomableCanvas}"/>
								</MultiBinding>
							</Setter.Value>
						</Setter>

						<Setter Property="VerticalContentAlignment" Value="Stretch"/>
						<Setter Property="HorizontalContentAlignment" Value="Stretch"/>
						<Setter Property="Padding" Value="0"/>
						<Setter Property="Background" Value="Transparent"/>

						<Style.Triggers>
					
								
							<!-- Branch line -->
							<DataTrigger Binding="{Binding Type}" Value="Branch">
								<Setter Property="IsEnabled" Value="true"/>
								<Setter Property="Focusable" Value="False"/>
								<Setter Property="Background" Value="Transparent"/>
								<Setter Property="ContentTemplate">
									<Setter.Value>
										<DataTemplate>
											<Grid Background="Transparent">
												<Path 
													Data="{Binding Line}"
													Stroke="{Binding Brush}"
													StrokeThickness="2">
												</Path>
												
												<Grid.ToolTip>
													<ToolTip  												
														Background="Black"
														BorderBrush="{Binding Brush}"
														BorderThickness="2">
														<StackPanel>
															<TextBlock Text="{Binding BranchToolTip}" Foreground="Lavender"/>
														</StackPanel>
													</ToolTip>
												</Grid.ToolTip>
												
												<Grid.ContextMenu>
													<!-- Background="Black" -->
													<ContextMenu 
					
														Foreground="LightSteelBlue"
														BorderBrush="DarkSlateBlue"
														BorderThickness="0">

														<!--Show Branch menu item -->
														<MenuItem 
															Header="Show Child Branch" 
															ItemsSource="{Binding ChildBranches}" 								
															Padding="0" 
															Margin="0" 
															BorderBrush="DarkSlateBlue" 
															BorderThickness="0">

															<MenuItem.ItemContainerStyle>
																<!--<Setter Property="Background" Value="Black"/>-->
																<Style TargetType="MenuItem">
																	<Setter Property="Header" Value="{Binding Text}"/>
																	<Setter Property="Background" Value="Black"/>
																	<Setter Property="Foreground" Value="LightSteelBlue"/>
																	<Setter Property="Margin" Value="0"/>
																	<Setter Property="Padding" Value="0"/>
																	<Setter Property="BorderBrush" Value="DarkSlateBlue"/>
																	<Setter Property="BorderThickness" Value="0"/>
																	<Setter Property="Command" Value="{Binding ShowBranchCommand}"/>
																	<Setter Property="CommandParameter" Value="{Binding Branch}"/>
																</Style>
															</MenuItem.ItemContainerStyle>
														</MenuItem>
														
														<MenuItem 
															Header="{Binding HideBranchText}"
															Command="{Binding HideBranchCommand}"
															CommandParameter="{Binding Branch}"/>
													</ContextMenu>
												</Grid.ContextMenu>	
			
											</Grid>
										</DataTemplate>
									</Setter.Value>
								</Setter>
							</DataTrigger>


							<!-- Merge line -->
							<DataTrigger Binding="{Binding Type}" Value="Merge">
								<Setter Property="IsEnabled" Value="false"/>
								<Setter Property="ToolTipService.ShowOnDisabled" Value="True"/>
								<Setter Property="ContentTemplate">
									<Setter.Value>
										<DataTemplate>
											<Grid>
												<Path 
													Data="{Binding Line}"
													Stroke="{Binding Brush}"
													StrokeThickness="{Binding Stroke}"
													StrokeDashArray="{Binding StrokeDash}"/>
											</Grid>
										</DataTemplate>
									</Setter.Value>
								</Setter>
							</DataTrigger>

							<!-- Commit row -->
							<DataTrigger Binding="{Binding Type}" Value="Commit">
								<Setter Property="ContentTemplate">
									<Setter.Value>
										<DataTemplate>
										
											<Grid Background="Transparent">
												<Grid.ColumnDefinitions>
													<ColumnDefinition Width="{Binding GraphWidth}"/>
													<ColumnDefinition Width="*"/>
												</Grid.ColumnDefinitions>


												<!-- Commit branch point -->
												<Canvas Grid.Column="0">
													<Button 	
														Canvas.Left="{Binding XPoint}"
														Canvas.Top="{Binding YPoint}">
														<Button.Template>
															<ControlTemplate>
																<Ellipse 																		
																	Width="{Binding Size}"
																	Height="{Binding Size}"
																	Fill="{Binding BrushInner}"
																	Stroke="{Binding Brush}"
																	StrokeThickness="2">
																</Ellipse>
															</ControlTemplate>
														</Button.Template>
													</Button>								
												</Canvas>

												<Grid Grid.Column="1">
													<Grid.ColumnDefinitions>
														<ColumnDefinition Width="15"/>
														<ColumnDefinition Width="*"/>
														<ColumnDefinition Width="130"/>
														<ColumnDefinition Width="105"/>
													</Grid.ColumnDefinitions>
													
													<Grid.ContextMenu>
														<ContextMenu 
															Background="Transparent" 
															Foreground="Lavender"
															BorderBrush="DarkSlateBlue"
															BorderThickness="0">

															<MenuItem 
																Header="Show Diff ..."
																Command="{Binding ShowDiffCommand}"
																CommandParameter="{Binding Id}"/>

															<MenuItem 
																Header="{Binding CommitBranchText}"
																Command="{Binding HideBranchCommand}"
																CommandParameter="{Binding CommitBranchName}"/>

															<MenuItem 
																Header="Set Commit Branch"
																Command="{Binding SetCommitBranchCommand}"/>

														</ContextMenu>
													</Grid.ContextMenu>


													<!-- Commit Id tip margin -->
													<TextBlock 
														Grid.Column="0"
														Text="       "
														HorizontalAlignment="Left"
														VerticalAlignment="Center">

														<TextBlock.ToolTip>
															<ToolTip
																Placement="Bottom"
																HorizontalOffset="-15" 
																VerticalOffset="5"
																Background="Black"
																BorderThickness="2"
																BorderBrush="{Binding Brush}">
																	<StackPanel>
																		<TextBlock Text="{Binding ToolTip}" Foreground="Lavender"/>
																	</StackPanel>
																</ToolTip>
															</TextBlock.ToolTip>
												</TextBlock>

												<Ellipse
													Margin="0,1,3,0"
													Visibility="{Binding Path=IsCurrent, Converter={StaticResource PropertyToVisibilityConverter}}"
													Grid.Column="0"
													Width="6"
													Height="6"
													Fill="LightSteelBlue">

														<Ellipse.ToolTip>
															<ToolTip
															Placement="Bottom"
															 HorizontalOffset="-15" 
															 VerticalOffset="5"
															Background="Black"
															BorderThickness="2"
															BorderBrush="{Binding Brush}">
																<StackPanel>
																	<TextBlock Text="{Binding ToolTip}" Foreground="Lavender"/>
																</StackPanel>
															</ToolTip>
														</Ellipse.ToolTip>
													</Ellipse>

													<!-- Commit Subject column -->
													<StackPanel 
														Grid.Column="1"
														Orientation="Horizontal">

														<!-- Tag -->
														<TextBlock 
															Text="{Binding Tags}"
															Foreground="MediumSeaGreen"
															HorizontalAlignment="Left"
															VerticalAlignment="Center"/>

														<!-- Tickets -->
														<TextBlock 
															Text="{Binding Tickets}"
															Foreground="Red"
															HorizontalAlignment="Left"
															VerticalAlignment="Center"/>

														<!-- Subject -->
														<TextBlock 
															Text="{Binding Subject}"
															Foreground="{Binding SubjectBrush}"
															FontSize="12"
															HorizontalAlignment="Left"
															VerticalAlignment="Center"/>
													</StackPanel>


													<!-- Author column -->
													<TextBlock 
													Grid.Column="2"
													Margin="5,0"
													Text="{Binding Author}"
													Foreground="{Binding SubjectBrush}"
													HorizontalAlignment="Left"
													VerticalAlignment="Center"/>

													<!-- Date column -->
													<TextBlock 
													Grid.Column="3"
													Margin="5,0"
													Text="{Binding Date}"
													Foreground="{Binding SubjectBrush}"
													HorizontalAlignment="Left"
													VerticalAlignment="Center"/>

					
												</Grid>
											</Grid>
										</DataTemplate>
									</Setter.Value>
								</Setter>
							</DataTrigger>

						</Style.Triggers>

					</Style>
					
				</ListBox.ItemContainerStyle>

			</ListBox>

		</DockPanel>
		</Border> 
		
		<!-- Commit details -->
	
			<Grid
				Grid.Row="2">
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="1*" />
					<ColumnDefinition Width="1*" />
				</Grid.ColumnDefinitions>
				
				<!-- The commit details list -->
				<Border 
					CornerRadius="0" 
					BorderThickness="1" 
					BorderBrush="DarkSlateBlue" 
					Grid.Column="0">
				
					<Grid>
						<Grid.Resources>
							<Style x:Key="HeaderLabelStyle" TargetType="Label">
								<Setter Property="Padding" Value="3,1" />
								<Setter Property="FontWeight" Value="Bold" />
								<Setter Property="Foreground" Value="{StaticResource TextLowBrush}" />
							</Style>
							<Style x:Key="TextLabelStyle" TargetType="Label">
								<Setter Property="Padding" Value="3,1" />					
								<Setter Property="Foreground" Value="{StaticResource TextBrush}" />
							</Style>
						</Grid.Resources>
						<Grid.ColumnDefinitions>
							<ColumnDefinition Width="60" />
							<ColumnDefinition Width="*" />
						</Grid.ColumnDefinitions>
						<Grid.RowDefinitions>
							<RowDefinition Height="auto"/>
							<RowDefinition Height="auto"/>
							<RowDefinition Height="auto"/>
							<RowDefinition Height="auto"/>
							<RowDefinition Height="auto"/>
							<RowDefinition Height="auto"/>
						</Grid.RowDefinitions>
						<Label 
							Grid.Column="0" Grid.Row="0"
							Style="{StaticResource HeaderLabelStyle}"
							Content="Id:"/>
						<Label 
							Grid.Column="1" Grid.Row="0"
							Style="{StaticResource TextLabelStyle}" 
							Content="{Binding RepositoryViewModel.CommitDetail.Id}"/>
						<Label 
							Grid.Column="0" Grid.Row="1" 
							Style="{StaticResource HeaderLabelStyle}" 
							Content="Branch:"/>
						<Label 
							Grid.Column="1" Grid.Row="1"
							Style="{StaticResource TextLabelStyle}" 
							Content="{Binding RepositoryViewModel.CommitDetail.Branch}"/>
						<Label 
							Grid.Column="0" Grid.Row="2"
							Visibility="{Binding Path=RepositoryViewModel.CommitDetail.IsTags, Converter={StaticResource PropertyToVisibilityConverter}}"
							Style="{StaticResource HeaderLabelStyle}" 
							Content="Tags:"/>
						<Label 
							Grid.Column="1" Grid.Row="2"
							Visibility="{Binding Path=RepositoryViewModel.CommitDetail.IsTags, Converter={StaticResource PropertyToVisibilityConverter}}"
							Style="{StaticResource TextLabelStyle}" 
							Foreground="MediumSeaGreen"
							Content="{Binding RepositoryViewModel.CommitDetail.Tags}"/>
						<Label 
							Grid.Column="0" Grid.Row="3"
							Visibility="{Binding Path=RepositoryViewModel.CommitDetail.IsTickets, Converter={StaticResource PropertyToVisibilityConverter}}"
							Style="{StaticResource HeaderLabelStyle}" 
							Content="Tickets:"/>				
						<Label 
							Grid.Column="1" Grid.Row="3"
							Visibility="{Binding Path=RepositoryViewModel.CommitDetail.IsTickets, Converter={StaticResource PropertyToVisibilityConverter}}"
							Style="{StaticResource TextLabelStyle}" 
							Foreground="Red"
							Content="{Binding RepositoryViewModel.CommitDetail.Tickets}"/>			
						<Label 
							Grid.Column="0" Grid.Row="4"
							Style="{StaticResource HeaderLabelStyle}" 
							Content="Subject:"/>
						<ScrollViewer Grid.Column="1" Grid.Row="4" 
							VerticalScrollBarVisibility="Auto">
							<TextBlock			
								Foreground="{StaticResource TextBrush}"
								Padding="3,1"
								Text="{Binding RepositoryViewModel.CommitDetail.Subject}"
								TextWrapping="Wrap"
							/>
						</ScrollViewer>
					</Grid>
					
				</Border>
						
				
				<!-- The commit files list -->
				<Border 
					
					CornerRadius="0" 
					BorderThickness="1" 
					BorderBrush="DarkSlateBlue" 
					Grid.Column="1">
				
					<ListBox
						Background="Transparent"
						ItemsSource="{Binding RepositoryViewModel.CommitDetail.Files}"
						Style="{DynamicResource ListBoxScrollbarStyle}"		
						HorizontalContentAlignment="Stretch"
					>
					
						
					<ListBox.ItemTemplate>
						<DataTemplate DataType="{x:Type commitsHistory:CommitFileViewModel}">
							<Grid>
								<Grid.ColumnDefinitions>
									<ColumnDefinition Width="*" />
									<ColumnDefinition Width="20" />
								</Grid.ColumnDefinitions>
								<Label
									Grid.Column="0"
									Padding="0"
									Content="{Binding Name}" 
									Foreground="{StaticResource TextBrush}"/>
								<Label
									Grid.Column="1"
									Padding="0"
									Content="{Binding Status}" 
									Foreground="{StaticResource TextBrush}"/>
								
								<Grid.ContextMenu>
									<ContextMenu 
										Background="Transparent" 
										Foreground="Lavender"
										BorderBrush="DarkSlateBlue"
										BorderThickness="0">

										<MenuItem 
											Header="Show Diff ..."
											Command="{Binding ShowDiffCommand}"/>
									</ContextMenu>
								</Grid.ContextMenu>	
								<Grid.InputBindings>
									<MouseBinding Gesture="LeftDoubleClick" Command="{Binding ShowDiffCommand}" />
								</Grid.InputBindings>			
							</Grid>
						</DataTemplate>
					</ListBox.ItemTemplate>
				</ListBox>
				</Border>
			</Grid>
		
	</Grid>
</Window>
